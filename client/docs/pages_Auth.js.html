<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/Auth.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/Auth.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useContext, useState } from 'react'
import { Container, Card, Form, Button, Row } from 'react-bootstrap'
import { NavLink, useLocation, useNavigate } from 'react-router-dom'
import { LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE } from '../utils/consts'
import { login, registration } from '../http/userAPI'
import { observer } from 'mobx-react-lite'
import { Context } from '..'

/**
 * Компонент для авторизації та реєстрації користувачів.
 * Використовує MobX для управління станом користувача та здійснює перехід на головну сторінку після успішного входу.
 */
const Auth = observer(() => {
	const { user } = useContext(Context)
	const location = useLocation()
	const navigate = useNavigate()
	const isLogin = location.pathname === LOGIN_ROUTE
	const [email, setEmail] = useState('')
	const [password, setPassword] = useState('')

	/**
	 * Обробник кліку для авторизації або реєстрації.
	 * Виконує запит до сервера та зберігає інформацію про користувача у MobX.
	 * У разі помилки виводить повідомлення.
	 */
	const click = async () => {
		try {
			let data
			if (isLogin) {
				console.log('Спроба входу в систему з email:', email)
				data = await login(email, password)
				console.log('Успішний вхід в систему:', data)
			} else {
				console.log('Спроба реєстрації з email:', email)
				data = await registration(email, password)
				console.log('Успішна реєстрація:', data)
			}
			user.setUser(data)
			user.setIsAuth(true)
			console.log('Користувач авторизований:', user.isAuth)
			navigate(SHOP_ROUTE)
		} catch (e) {
			console.error('Помилка при вході/реєстрації:', e.response.data.message)
			alert(e.response.data.message)
		}
	}

	return (
		&lt;Container
			className='d-flex justify-content-center align-items-center'
			style={{ height: window.innerHeight - 54 }}
		>
			&lt;Card style={{ width: 600 }} className='p-5'>
				&lt;h2 className='m-auto'>{isLogin ? 'Авторизація' : 'Реєстрація'}&lt;/h2>
				&lt;Form className='d-flex flex-column'>
					&lt;Form.Control
						className='mt-3'
						placeholder='Введіть ваш email...'
						value={email}
						onChange={e => setEmail(e.target.value)}
					/>
					&lt;Form.Control
						className='mt-3'
						placeholder='Введіть ваш пароль...'
						value={password}
						onChange={e => setPassword(e.target.value)}
						type='password'
					/>
					&lt;Row className='d-flex justify-content-between mt-3 pl-3 pr-3'>
						{isLogin ? (
							&lt;div>
								Немає аккаунту?{' '}
								&lt;NavLink to={REGISTRATION_ROUTE}>Зареєструватися&lt;/NavLink>
							&lt;/div>
						) : (
							&lt;div>
								Є аккаунт? &lt;NavLink to={LOGIN_ROUTE}>Увійти&lt;/NavLink>
							&lt;/div>
						)}
						&lt;Button variant={'outline-success'} onClick={click}>
							{isLogin ? 'Увійти' : 'Зареєструватися'}
						&lt;/Button>
					&lt;/Row>
				&lt;/Form>
			&lt;/Card>
		&lt;/Container>
	)
})

export default Auth
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#Auth">Auth</a></li><li><a href="global.html#BrandBar">BrandBar</a></li><li><a href="global.html#NavBar">NavBar</a></li><li><a href="global.html#Pages">Pages</a></li><li><a href="global.html#ProductList">ProductList</a></li><li><a href="global.html#ProductPage">ProductPage</a></li><li><a href="global.html#Shop">Shop</a></li><li><a href="global.html#TypeBar">TypeBar</a></li><li><a href="global.html#check">check</a></li><li><a href="global.html#deleteAccount">deleteAccount</a></li><li><a href="global.html#exportData">exportData</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#registration">registration</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Feb 28 2025 01:03:03 GMT+0200 (за східноєвропейським стандартним часом)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
